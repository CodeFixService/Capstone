@page "{id:int}"
@model SmartFlow.Web.Pages.Admin.Solicitudes.EditModel
@{
    ViewData["Title"] = "Revisar Solicitud";
}

<h2 class="mb-3">Revisar Solicitud</h2>

<div class="border rounded p-4 bg-light shadow-sm mb-3">
    <dl class="row mb-0">
        <dt class="col-sm-3">ID</dt>
        <dd class="col-sm-9">@Model.Solicitud.Id</dd>

        <dt class="col-sm-3">Asunto</dt>
        <dd class="col-sm-9">@Model.Solicitud.Asunto</dd>

        <dt class="col-sm-3">Descripción</dt>
        <dd class="col-sm-9">@Model.Solicitud.Descripcion</dd>

        <dt class="col-sm-3">Usuario</dt>
        <dd class="col-sm-9">@Model.Solicitud.Usuario?.Nombre</dd>

        <dt class="col-sm-3">Servicio</dt>
        <dd class="col-sm-9">@Model.Solicitud.Servicio?.Nombre</dd>

        <dt class="col-sm-3">Fecha de Creación</dt>
        <dd class="col-sm-9">@Model.Solicitud.FechaCreacion.ToString("dd/MM/yyyy HH:mm")</dd>

        <dt class="col-sm-3">Estado Actual</dt>
        <dd class="col-sm-9">
            @if (Model.Solicitud.Estado == "Aprobada")
            {
                <span class="badge bg-success">Aprobada</span>
            }
            else if (Model.Solicitud.Estado == "Rechazada")
            {
                <span class="badge bg-danger">Rechazada</span>
            }
            else
            {
                <span class="badge bg-warning text-dark">Pendiente</span>
            }
        </dd>
    </dl>
</div>

<form method="post" class="border rounded p-4 shadow-sm">
    <input type="hidden" asp-for="Id" />

    <div class="mb-3">
        <label asp-for="Estado" class="form-label">Actualizar Estado</label>
        <select asp-for="Estado" class="form-select">
            <option value="Pendiente">Pendiente</option>
            <option value="Aprobada">Aprobada</option>
            <option value="Rechazada">Rechazada</option>
        </select>
    </div>

    <div class="mb-3">
        <label asp-for="Motivo" class="form-label">Motivo / Comentario</label>
        <textarea asp-for="Motivo" class="form-control" rows="3" placeholder="Motivo de aprobación o rechazo..."></textarea>
    </div>

    <button type="submit" class="btn btn-success">
        <i class="bi bi-check2-square"></i> Guardar Cambios
    </button>
    <a asp-page="Index" class="btn btn-secondary ms-2">
        <i class="bi bi-arrow-left"></i> Volver
    </a>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
}
